from django.urls import reverse
from baseclasses.dataclasses.view_classes import ActionElement, ListActionElement
from baseclasses import views
from code_generation.tests.data.output.managers.company_managers import CompanyTableManager
from code_generation.tests.data.output.managers.company_managers import CompanyDetailsManager
from code_generation.tests.data.output.pages.company_pages import CompanyPage
from code_generation.tests.data.output.pages.company_pages import CompanyDetailsPage
from code_generation.tests.data.output.forms.company_forms import CompanyCreateForm


class CompanyCreateView(views.MontrekCreateView):
    manager_class = CompanyTableManager
    page_class = CompanyPage
    tab = "tab_company_list"
    form_class = CompanyCreateForm
    success_url = "company_list"
    title = "Company Create"


class CompanyUpdateView(views.MontrekUpdateView):
    manager_class = CompanyTableManager
    page_class = CompanyPage
    tab = "tab_company_list"
    form_class = CompanyCreateForm
    success_url = "company_list"
    title = "Company Update"


class CompanyDeleteView(views.MontrekDeleteView):
    manager_class = CompanyTableManager
    page_class = CompanyPage
    tab = "tab_company_list"
    success_url = "company_list"
    title = "Company Delete"


class CompanyListView(views.MontrekListView):
    manager_class = CompanyTableManager
    page_class = CompanyPage
    tab = "tab_company_list"
    title = "Company List"

    @property
    def actions(self) -> tuple:
        action_new = ActionElement(
            icon="plus",
            link=reverse("company_create"),
            action_id="id_create_company",
            hover_text="Create new Company",
        )
        return (action_new,)

class CompanyDetailView(views.MontrekDetailView):
    manager_class = CompanyDetailsManager
    page_class = CompanyDetailsPage
    tab = "tab_company_details"
    title = "Company Details"

    @property
    def actions(self) -> tuple:
        action_back = ListActionElement("company_list")
        return (action_back,)


class CompanyHistoryView(views.MontrekHistoryListView):
    manager_class = CompanyTableManager
    page_class = CompanyDetailsPage
    tab = "tab_company_history"
    title = "Company History"

    @property
    def actions(self) -> tuple:
        action_back = ListActionElement("company_list")
        return (action_back,)
