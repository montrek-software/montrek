{% load data_table_filters %}

<form method="get" class="w-100">
  {% for f in filter_forms %}

  <!-- One row exactly like the old version -->
  <div class="row mb-2">
    <div class="col-12 d-flex flex-wrap gap-3 align-items-center">
      <!-- FIELD -->
      <div class="input-group input-group-sm w-auto">
        <span class="input-group-text">Field</span>
        {{ f.filter_field|add_class:"form-select" }}
      </div>

      <!-- NEGATE -->
      <div class="input-group input-group-sm w-auto">
        <span class="input-group-text">Not</span>
        {{ f.filter_negate|add_class:"form-select" }}
      </div>

      <!-- LOOKUP -->
      <div class="input-group input-group-sm w-auto">
        <span class="input-group-text">Cond</span>
        {{ f.filter_lookup|add_class:"form-select" }}
      </div>

      <!-- VALUE -->
      <div class="input-group input-group-sm w-auto">
        <span class="input-group-text">Value</span>
        {{ f.filter_value|add_class:"form-control" }}
      </div>
    </div>
  </div>

  {% endfor %}

  <input type="hidden" name="action" id="form-action" />

  <!-- ACTION BUTTONS (same logic as old version) -->
  <div class="d-flex flex-wrap gap-2 mt-1">
    <button
      type="submit"
      onclick="document.getElementById('form-action').value='filter'"
      class="btn btn-custom py-0 px-3"
    >
      Filter
    </button>

    <button
      type="submit"
      onclick="document.getElementById('form-action').value='reset'"
      class="btn btn-light-custom py-0 px-3"
    >
      Reset
    </button>

    <button
      type="submit"
      onclick="document.getElementById('form-action').value='add_filter'"
      class="btn btn-light-custom py-0 px-1"
      title="Add filter"
    >
      <i class="bi bi-plus fs-5"></i>
    </button>
  </div>
</form>
